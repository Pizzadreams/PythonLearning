<!DOCTYPE html>
<html>
<head>

    <script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>

</head>
    <body>
        <h1>Art Gallery</h1>
        
        <div style="text-align:center;margin-bottom:16px;">
            <button onclick="window.location.reload();" style="padding:8px 16px;background:#8B5C2A;color:#fff;border:none;border-radius:6px;cursor:pointer;">
                New Room
            </button>
        </div>

        <!-- 3D Gallery Section -->
        <div id="gallery3d" style="width:100vw;height:80vh;"></div>

        <!-- Expose Django data to JS -->
        <script>
            const paintings = JSON.parse('{{ paintings_json|escapejs }}');
        </script>

        <!-- three.js and your 3D gallery script here -->
        <script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>
        <script>
            // Basic three.js setup
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/(window.innerHeight*0.8), 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight * 0.8);
            document.getElementById('gallery3d').appendChild(renderer.domElement);

            // Add paintings as planes on a wall
            const loader = new THREE.TextureLoader();
            paintings.forEach((painting, i) => {
                loader.load(painting.img, function(texture) {
                    const geometry = new THREE.PlaneGeometry(2, 1.5);
                    const material = new THREE.MeshBasicMaterial({ map: texture });
                    const mesh = new THREE.Mesh(geometry, material);
                    mesh.position.set(i * 2.5 - 2.5, 1, -5); // Spread out paintings
                    scene.add(mesh);
                });
            });

            camera.position.z = 2;
            camera.position.y = 1;

            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
            animate();
        </script>
    </body>
</html>